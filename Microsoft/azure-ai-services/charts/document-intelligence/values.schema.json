{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "replicaCount": {
      "type": "integer",
      "minimum": 1,
      "description": "Number of replicas"
    },
    "kubernetesVersion": {
      "type": "string",
      "enum": ["1.32", "1.28", "1.26", "1.24", "pre-1.24"],
      "description": "Kubernetes version for compatibility (pre-1.24 disables securityContext)"
    },
    "documentIntelligence": {
      "type": "object",
      "properties": {
        "modelType": {
          "type": "string",
          "enum": ["read", "layout", "invoice", "receipt", "businessCard", "idDocument", "generalDocument", "customTemplate"],
          "description": "Document Intelligence model type"
        },
        "envSeparator": {
          "type": "string",
          "pattern": "^[._:\\-]$",
          "default": "_",
          "description": "Separator character for mount environment variables (e.g., Mounts_License). Options: _ . : -"
        },
        "azure": {
          "type": "object",
          "properties": {
            "billingEndpoint": {
              "type": "string",
              "description": "Azure billing endpoint URL"
            },
            "apiKey": {
              "type": "string",
              "description": "Azure API key"
            },
            "downloadLicense": {
              "type": "boolean",
              "description": "Enable license download mode"
            }
          }
        },
        "license": {
          "type": "object",
          "properties": {
            "mountPath": {
              "type": "string",
              "description": "License mount path"
            },
            "existingClaim": {
              "type": "string",
              "description": "Existing PVC for license"
            },
            "storageSize": {
              "type": "string",
              "description": "Storage size for license PVC"
            },
            "storageClassName": {
              "type": "string",
              "description": "Storage class name"
            },
            "licenseData": {
              "type": "string",
              "description": "Pre-downloaded license file content (base64 or plain text)"
            }
          }
        },
        "output": {
          "type": "object",
          "properties": {
            "mountPath": {
              "type": "string",
              "description": "Output logs mount path"
            },
            "existingClaim": {
              "type": "string",
              "description": "Existing PVC for output"
            },
            "storageSize": {
              "type": "string",
              "description": "Storage size for output PVC"
            },
            "storageClassName": {
              "type": "string",
              "description": "Storage class name"
            }
          }
        },
        "shared": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable shared storage for multi-container setups"
            },
            "mountPath": {
              "type": "string",
              "description": "Shared storage mount path"
            },
            "existingClaim": {
              "type": "string",
              "description": "Existing PVC for shared storage"
            },
            "storageSize": {
              "type": "string",
              "description": "Storage size for shared PVC"
            },
            "storageClassName": {
              "type": "string",
              "description": "Storage class name"
            }
          }
        },
        "advanced": {
          "type": "object",
          "properties": {
            "storageTimeToLiveInMinutes": {
              "type": "integer",
              "minimum": 5,
              "maximum": 10080,
              "default": 2880,
              "description": "TTL duration to remove all intermediate and final files (5 min to 7 days)"
            },
            "taskMaxRunningTimeSpanInMinutes": {
              "type": "integer",
              "minimum": 1,
              "default": 60,
              "description": "Maximum running time for treating request as timeout"
            },
            "healthCheckMemoryUpperboundInMB": {
              "type": ["string", "integer"],
              "description": "Memory threshold for reporting unhealthy to liveness"
            },
            "queueAzureConnectionString": {
              "type": "string",
              "description": "Azure Queue connection string"
            },
            "storageObjectStoreAzureBlobConnectionString": {
              "type": "string",
              "description": "Azure Blob storage connection string"
            },
            "httpProxyBypassUrls": {
              "type": "string",
              "description": "HTTP proxy bypass URLs"
            },
            "performance": {
              "type": "object",
              "properties": {
                "oneOcrConcurrency": {
                  "type": ["string", "integer"],
                  "minimum": 1,
                  "maximum": 32,
                  "description": "OneOCR concurrency level for parallel operations"
                },
                "ocrWorkerThreadPoolSize": {
                  "type": ["string", "integer"],
                  "minimum": 1,
                  "maximum": 16,
                  "description": "OCR worker thread pool size"
                },
                "queuePriorityExtraConcurrentWorkerCount": {
                  "type": ["string", "integer"],
                  "minimum": 0,
                  "maximum": 8,
                  "description": "Queue priority extra concurrent worker count"
                }
              }
            },
            "logging": {
              "type": "object",
              "properties": {
                "consoleLogLevel": {
                  "type": "string",
                  "enum": ["Trace", "Debug", "Information", "Warning", "Error", "Critical", "None"],
                  "default": "Information",
                  "description": "Console log level"
                }
              }
            }
          }
        }
      }
    },
    "image": {
      "type": "object",
      "properties": {
        "repository": {
          "type": "string",
          "description": "Container image repository"
        },
        "pullPolicy": {
          "type": "string",
          "enum": ["Always", "IfNotPresent", "Never"],
          "description": "Image pull policy"
        },
        "tag": {
          "type": "string",
          "description": "Image tag"
        }
      }
    },
    "ingress": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable ingress"
        },
        "controllerType": {
          "type": "string",
          "enum": ["azure-loadbalancer", "application-gateway", "nginx"],
          "description": "Ingress controller type"
        },
        "className": {
          "type": "string",
          "description": "Ingress class name"
        },
        "annotations": {
          "type": "object",
          "description": "Ingress annotations"
        },
        "hosts": {
          "type": "array",
          "description": "Ingress hosts"
        },
        "tls": {
          "type": "array",
          "description": "TLS configuration"
        }
      }
    },
    "service": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["ClusterIP", "NodePort", "LoadBalancer"],
          "description": "Service type"
        },
        "port": {
          "type": "integer",
          "description": "Service port"
        },
        "targetPort": {
          "type": "integer",
          "description": "Container target port"
        }
      }
    },
    "resources": {
      "type": "object",
      "description": "Resource requests and limits"
    },
    "vpa": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable Vertical Pod Autoscaler"
        },
        "updateMode": {
          "type": "string",
          "enum": ["Auto", "Initial", "Off"],
          "description": "VPA update mode"
        },
        "minAllowed": {
          "type": "object",
          "properties": {
            "cpu": {
              "type": "string",
              "description": "Minimum CPU"
            },
            "memory": {
              "type": "string",
              "description": "Minimum memory"
            }
          }
        },
        "maxAllowed": {
          "type": "object",
          "properties": {
            "cpu": {
              "type": "string",
              "description": "Maximum CPU"
            },
            "memory": {
              "type": "string",
              "description": "Maximum memory"
            }
          }
        }
      }
    }
  }
}
